<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>予約フォーム</title>
<script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
</head>
<body>
<h1>予約フォーム</h1>

<input type="text" id="name" placeholder="名前">
<input type="date" id="date">
<input type="time" id="time">
<input type="text" id="menu" placeholder="メニュー">

<button id="reserveBtn">予約送信</button>

<script>
const liffId = "2008012264-GAaEPJdZ"; // ここにLIFF ID
const GAS_URL = "https://script.google.com/macros/s/AKfycbyBU16vHa-DkxJuaYDRE9iubBaF0M5o_62FOUtaDfOiYyvqHPDwjSguMI2P7BcaJUw_Yw/exec"; // ここにGASのデプロイURL

async function main() {
  await liff.init({ liffId });

  const btn = document.getElementById("reserveBtn");
  btn.onclick = async () => {
    try {
      const userId = liff.getContext().userId || "";
      const res = await fetch(GAS_URL, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          userName: document.getElementById("name").value,
          reservationDate: document.getElementById("date").value,
          reservationTime: document.getElementById("time").value,
          reservationMenu: document.getElementById("menu").value,
          userId
        })
      });

      const data = await res.json();
      if (data.status === "success") {
        alert("予約が完了しました！");
      } else {
        alert("エラー: " + data.message);
      }
    } catch (err) {
      console.error(err);
      alert("送信エラー");
    }
  };
}

main();
</script>
</body>
</html>
